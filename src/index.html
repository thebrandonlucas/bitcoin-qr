<!doctype html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Bitcoin QR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="/build/bitcoin-qr.esm.js"></script>
    <script nomodule src="/build/bitcoin-qr.js"></script>
    <script>
      let pollCount = 0;
      let paid = false;

      async function callbackExample() {
        pollCount += 1;
        console.log({ pollCount });

        if (pollCount >= 5) {
          isPolling = false;
          paid = true;
          alert('Paid!');
          const qr = document.getElementById('qr');
          qr.setAttribute('is-polling', false);
        }
      }

      async function reset() {
        pollCount = 0;
        paid = false;
      }

      async function start() {
        const qr = document.getElementById('qr');
        qr.setAttribute('is-polling', true);
      }
    </script>
  </head>
  <body style="background-color: black">
    <div class="flex flex-col items-center">
      <bitcoin-qr
        id="qr"
        width="400"
        height="400"
        bitcoin="BC1QYLH3U67J673H6Y6ALV70M0PL2YZ53TZHVXGG7U"
        parameters="jflsdkajfklsa;jfklajfsjdafjsafjlasjfl;kajflk;ajd;sf;kladsjflkajdsklfjas"
        image="./assets/voltage.svg"
        is-polling="true"
        poll-interval="1000"
        type="svg"
        shape="square"
        dots-type="rounded"
        image-size="100"
        image-margin="300"
        cornersSquareType="extra-rounded"
        dots-color="blue"
      />
    </div>
    <button onclick="start()">Start</button>
    <button onclick="reset()">Reset</button>
    <script>
      document.getElementById('qr').callback = callbackExample;
    </script>
  </body>
</html>
